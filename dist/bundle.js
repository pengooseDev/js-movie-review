(()=>{"use strict";var e={21:(e,n,t)=>{t.d(n,{Z:()=>p});var r=t(81),i=t.n(r),o=t(645),a=t.n(o),s=t(667),c=t.n(s),l=new URL(t(783),t.b),d=a()(i()),u=c()(l);d.push([e.id,`* {\n  box-sizing: border-box !important;\n}\n\nbody {\n  font-size: 14px;\n  background-color: #222222;\n  color: #fff;\n}\n\na {\n  color: inherit;\n  text-decoration: none;\n}\n\nbutton {\n  cursor: pointer;\n}\n\n#app {\n  padding-bottom: 48px;\n}\n\n*:focus {\n  outline: none;\n}\n.item-view,\n.item-test {\n  width: 100%;\n}\n\n.item-view {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  width: 1200px;\n  margin: 0 auto;\n}\n\n.item-view h2 {\n  font-size: 2rem;\n  font-weight: bold;\n  user-select: none;\n}\n\n/* https://andrew.hedges.name/experiments/aspect_ratio/ */\n\n.item-list {\n  display: grid;\n  margin: 48px 0;\n  grid-template-columns: repeat(4, 180px);\n  grid-column-gap: 160px;\n  grid-row-gap: 48px;\n}\n\n.item-card {\n  display: flex;\n  flex-direction: column;\n}\n\n.item-thumbnail {\n  border-radius: 8px;\n  width: 180px;\n  height: 270px;\n  background-size: contain;\n}\n\n.item-title {\n  margin-top: 16px;\n  font-size: 1.2rem;\n  font-weight: bold;\n}\n\n.item-score {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  margin-top: 16px;\n  font-size: 1.2rem;\n}\n\n.item-score::after {\n  margin-left: 8px;\n}\n\n.item-title.skeleton::after,\n.item-score.skeleton::after {\n  font-size: 0;\n  content: 'loading';\n}\n\n.full-width {\n  width: 100%;\n}\n\n.last-item {\n  margin-top: 48px;\n}\n\nbutton.btn {\n  border: 0;\n  border-radius: 8px;\n  height: 30px;\n  color: #fff;\n}\n\nbutton.primary {\n  background: #f33f3f;\n}\n\n.item-card .skeleton {\n  background: linear-gradient(-90deg, #aaa, #f0f0f0, #aaa, #f0f0f0);\n  background-size: 400%;\n  animation: skeleton-animation 5s infinite ease-out;\n  border-radius: 8px;\n}\n\n@keyframes skeleton-animation {\n  0% {\n    background-position: 0% 50%;\n  }\n  50% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\nheader {\n  width: 100%;\n  min-width: 1200px;\n  height: 72px;\n  background-color: #222;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 20px;\n  border-bottom: 1px solid white;\n  margin-bottom: 48px;\n}\n\nheader h1 {\n  cursor: pointer;\n  user-select: none;\n  font-size: 2rem;\n  font-weight: bold;\n  letter-spacing: -0.1rem;\n  color: #f33f3f;\n}\n\nheader > .search-box {\n  background: #fff;\n  padding: 8px;\n  border-radius: 4px;\n}\n\nheader .search-box > input {\n  border: 0;\n}\n\nheader .search-box > .search-button {\n  width: 14px;\n  border: 0;\n  text-indent: -1000rem;\n  background: url(${u}) transparent no-repeat 0 1px;\n  background-size: contain;\n}\n`,""]);const p=d},771:(e,n,t)=>{t.d(n,{Z:()=>d});var r=t(81),i=t.n(r),o=t(645),a=t.n(o),s=t(434),c=t(21),l=a()(i());l.i(s.Z),l.i(c.Z),l.push([e.id,"\n",""]);const d=l},434:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(81),i=t.n(r),o=t(645),a=t.n(o)()(i());a.push([e.id,'/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\nbody {\n  line-height: 1;\n}\nol,\nul {\n  list-style: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: "";\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n',""]);const s=a},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&a[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),n.push(d))}},n}},667:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],d=o[l]||0,u="".concat(l," ").concat(d);o[l]=d+1;var p=t(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(h);else{var m=i(h,r);r.byIndex=s,n.splice(s,0,{identifier:u,updater:m,references:1})}a.push(u)}return a}function i(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=t(o[a]);n[s].references--}for(var c=r(e,i),l=0;l<o.length;l++){var d=t(o[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}o=c}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,i&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},783:(e,n,t)=>{e.exports=t.p+"f1bd4269f4446ceae306.png"}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={id:r,exports:{}};return e[r](o,o.exports,t),o.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.p="/",t.b=document.baseURI||self.location.href,t.nc=void 0,(()=>{var e=t(379),n=t.n(e),r=t(795),i=t.n(r),o=t(569),a=t.n(o),s=t(565),c=t.n(s),l=t(216),d=t.n(l),u=t(589),p=t.n(u),h=t(771),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=a().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=d(),n()(h.Z,m),h.Z&&h.Z.locals&&h.Z.locals;var f=t(434),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=a().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d(),n()(f.Z,g),f.Z&&f.Z.locals&&f.Z.locals;var v=t(21),b={};b.styleTagTransform=p(),b.setAttributes=c(),b.insert=a().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=d(),n()(v.Z,b),v.Z&&v.Z.locals&&v.Z.locals;const y=t.p+"2e162b4fefb34cd7ed8d.png",w=Object.freeze({GET_MOVIE:{method:"GET",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4MjgwMzQyOTBkNDFkNWViZmRkMjdjNWU0NzI0ZWRlNSIsInN1YiI6IjYyZTEzY2I1ZTlkYTY5Mjc0NzVkOGY1MyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.7LX5-_uUvqVvlT5W15bOsdcax_Aty_2HyRKkfaTtbko",accept:"application/json"}}}),x=Object.freeze({POPULAR_MOVIE:(e=1)=>({endpoint:`https://api.themoviedb.org/3/discover/movie?include_adult=false&include_video=false&language=en-US&page=${e}&sort_by=popularity.desc`,config:w.GET_MOVIE}),SEARCH_API:(e,n=1)=>({endpoint:`https://api.themoviedb.org/3/search/movie?api_key=YOUR_API_KEY&language=en-US&query=${e}&page=${n}`,config:w.GET_MOVIE})}),I=Object.freeze({TMDB:x}),T=Object.freeze({FULFILLED:"fulfilled"}),M=Object.freeze({INVALID_MOVIE_STRING:"잘못된 영화제목입니다.",INVALID_MOVIE_THUMBNAIL_URL:"유효한 URL이 아닙니다.",INVALID_MOVIE_RATING:(e,n)=>`점수는 ${e}점과 ${n}점 사이여야 합니다.`}),E=Object.freeze({HTTP:e=>`HTTP Error | Status ${e}`,MOVIE:M}),L=Object.freeze({LOADING_STATE_CHANGE:"onLoadingStateChange",CLICK:"click"}),k="https://image.tmdb.org/t/p/w500";class _{isLoading=!1;eventListener=new EventTarget;async get(e,n={}){const{method:t,headers:r}=n;this.#e(!0);const i=await fetch(e,{method:t,headers:r});if(!i.ok)throw new Error(E.HTTP(i.status));return this.#e(!1),await i.json()}#e(e){this.isLoading=e,this.eventListener.dispatchEvent(new Event(L.LOADING_STATE_CHANGE))}}const S=e=>{if("string"!=typeof e||""===e.trim())throw new Error(E.MOVIE.INVALID_STRING)};class A{#n;#t;#r;#i;constructor({title:e,thumbnail:n,rating:t,description:r}){(e=>{const{title:n,rating:t,description:r}=e;S(n),(e=>{if(!("number"==typeof e&&0<=e&&e<=10))throw new Error(E.MOVIE.INVALID_RATING(0,10))})(t),S(r)})({title:e,thumbnail:n,rating:t,description:r}),this.#n=e,this.#t=n,this.#r=t,this.#i=r}getData(){return{title:this.#n,thumbnail:this.#t,rating:this.#r,description:this.#i}}}class O{#o;#a=1;constructor(e){this.#o=e}async#s(e){const n=[I.TMDB.POPULAR_MOVIE(e)],t=await Promise.allSettled(n.map((({endpoint:e,config:n})=>this.#o.get(e,n))));if(0===t.length)return[];const r=this.#c(t);return this.#l(r)}#c(e){return e.filter((({status:e})=>e===T.FULFILLED)).map((({value:e})=>e))}#l(e){return e[0].results}async getMovie(){return(await this.#s(this.#a++)).map((e=>{const{original_title:n,overview:t,poster_path:r,vote_average:i}=e;return new A({title:n,thumbnail:`${k}${r}`,rating:i,description:t})}))}async searchMovie(e){return(await this.#d(e,this.#a++)).map((e=>{const{original_title:n,overview:t,poster_path:r,vote_average:i}=e;return new A({title:n,thumbnail:`${k}${r}`,rating:i,description:t})}))}async#d(e,n){const t=I.TMDB.SEARCH_API(e,n),r=await this.#o.get(t.endpoint,t.config);return this.#l([r])}resetPage(){this.#a=1}}const N=t.p+"6328741810b732410eec.png";class z{#u=document.createElement("li");constructor(){this.#p()}get component(){return this.#u}render(e){if(!e)return this.remove();const{title:n,thumbnail:t,rating:r}=e.getData();this.#u.innerHTML=`\n      <a href="#">\n        <div class="item-card">\n          <img class="item-thumbnail" src="${t}" loading="lazy" alt="${n}" />\n          <p class="item-title">${n}</p>\n          <p class="item-score"><img src="${r?N:""}" alt="별점" /> ${r}</p>\n        </div>\n      </a>\n    `}#p(){this.#u.innerHTML='\n        <a href="#">\n          <div class="item-card">\n            <div class="item-thumbnail skeleton"></div>\n            <p class="item-title skeleton"></p>\n            <p class="item-score skeleton"></p>\n          </div>\n        </a>\n    '}remove(){this.#u.innerHTML=""}}class C{#h=document.querySelector(".item-list");constructor(){}createMovieComponent(e){const n=Array(e).fill(null).map((()=>new z));return n.forEach((e=>this.#h.appendChild(e.component))),n}clearMovies(){this.#h.innerHTML=""}removeMovieFetchButton(){const e=document.querySelector("#movie-fetch-button");e&&e.remove()}getSearchTerm(){return document.querySelector("#movie-search-input")}}class j{#m;#f=new C;#o=new _;#g="";constructor(){this.#m=new O(this.#o),this.#v()}async#v(){this.#b(),this.#y(),this.#w()}#b(){document.querySelector("#movie-fetch-button").addEventListener(L.CLICK,(async()=>{this.#w()}))}#y(){const e=document.querySelector("#movie-search-button"),n=document.querySelector("#movie-search-input");e.addEventListener(L.CLICK,(async()=>{this.#f.clearMovies(),this.#m.resetPage(),this.#g=n.value.trim(),this.#w("search")}))}async#w(e="popular"){const n=this.#f.createMovieComponent(20),t=await this.#x();t.length<20&&this.#f.removeMovieFetchButton(t);for(let e=0;e<20;e++)n[e].render(t[e])}async#x(){return this.#g?await this.#m.searchMovie(this.#g):await this.#m.getMovie()}}new class{#I;constructor(){this.#I=new j}},document.querySelector("img[src='./src/assets/logo.png']").src=y})()})();